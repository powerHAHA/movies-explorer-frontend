{"ast":null,"code":"import _slicedToArray from\"/Users/denis/dev/movies-explorer-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useContext,useEffect}from'react';import'./Profile.css';import{CurrentUserContext}from'../../contexts/CurrentUserContext';import{useFormWithValidation}from'../../hooks/useFormValidator';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export var Profile=function Profile(_ref){var onSignOut=_ref.onSignOut,onEditUserInfo=_ref.onEditUserInfo,onError=_ref.onError,onSuccess=_ref.onSuccess,isLoading=_ref.isLoading;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isVisible=_useState2[0],setIsVisible=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isDisable=_useState4[0],setIsDisable=_useState4[1];var currentUser=useContext(CurrentUserContext);var _useFormWithValidatio=useFormWithValidation(),values=_useFormWithValidatio.values,setValues=_useFormWithValidatio.setValues,handleChange=_useFormWithValidatio.handleChange,errors=_useFormWithValidatio.errors,isValid=_useFormWithValidatio.isValid,resetForm=_useFormWithValidatio.resetForm;useEffect(function(){setValues(currentUser);},[setValues,currentUser]);useEffect(function(){if(currentUser.name!==values.name||currentUser.email!==values.email){setIsDisable(true);}else{setIsDisable(false);}},[currentUser.name,currentUser.email,values.name,values.email]);function handleSubmit(e){e.preventDefault();onEditUserInfo({name:values.name,email:values.email});resetForm();}function changeVisibility(){setIsVisible(true);}return/*#__PURE__*/_jsx(\"section\",{className:\"profile\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"profile__container\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"profile__title\",children:[\"\\u041F\\u0440\\u0438\\u0432\\u0435\\u0442, \",currentUser.name,\"!\"]}),/*#__PURE__*/_jsxs(\"form\",{className:\"profile__form\",name:\"form-profile\",onSubmit:handleSubmit,noValidate:true,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile__wrapper\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"profile__caption\",children:\"\\u0418\\u043C\\u044F\"}),/*#__PURE__*/_jsx(\"input\",{className:\"profile__input\",name:\"name\",type:\"text\",placeholder:\"\\u0418\\u043C\\u044F\",value:values.name||'',onChange:handleChange,required:true,minLength:\"2\",maxLength:\"30\",autoComplete:\"off\",disabled:(isVisible?false:true)||isLoading})]}),/*#__PURE__*/_jsx(\"span\",{className:errors.name?'profile__error profile__error_margin':'profile__error',children:errors.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile__wrapper\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"profile__caption\",children:\"E-mail\"}),/*#__PURE__*/_jsx(\"input\",{className:\"profile__input\",name:\"email\",type:\"email\",placeholder:\"E-mail\",value:values.email||'',onChange:handleChange,required:true,pattern:\"^[a-zA-Z0-9_.+\\\\-]+@[a-zA-Z0-9\\\\-]+\\\\.[a-zA-Z0-9\\\\-.]+$\",autoComplete:\"off\",disabled:(isVisible?false:true)||isLoading})]}),/*#__PURE__*/_jsx(\"span\",{className:errors.email?'profile__error':'profile__error',children:errors.email}),/*#__PURE__*/_jsx(\"div\",{className:\"profile__container-button\",children:isVisible?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{className:\"profile__error profile__error_type_server\",children:onError||onSuccess}),/*#__PURE__*/_jsx(\"button\",{className:!isValid||!isDisable?'button profile__button profile__button_type_save profile__button_disable':'button profile__button profile__button_type_save ',type:\"submit\",\"aria-label\":\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\",disabled:isValid&&isDisable?false:true,children:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{className:\"button profile__button profile__button_type_edit\",type:\"button\",\"aria-label\":\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\",onClick:changeVisibility,children:\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"button\",{className:\"button profile__button profile__button_type_exit\",type:\"button\",\"aria-label\":\"\\u0412\\u044B\\u0445\\u043E\\u0434\",onClick:onSignOut,children:\"\\u0412\\u044B\\u0439\\u0442\\u0438 \\u0438\\u0437 \\u0430\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442\\u0430\"})]})})]})]})});};","map":{"version":3,"names":["React","useState","useContext","useEffect","CurrentUserContext","useFormWithValidation","jsxs","_jsxs","jsx","_jsx","Fragment","_Fragment","Profile","_ref","onSignOut","onEditUserInfo","onError","onSuccess","isLoading","_useState","_useState2","_slicedToArray","isVisible","setIsVisible","_useState3","_useState4","isDisable","setIsDisable","currentUser","_useFormWithValidatio","values","setValues","handleChange","errors","isValid","resetForm","name","email","handleSubmit","e","preventDefault","changeVisibility","className","children","onSubmit","noValidate","type","placeholder","value","onChange","required","minLength","maxLength","autoComplete","disabled","pattern","onClick"],"sources":["/Users/denis/dev/movies-explorer-frontend/src/components/Profile/Profile.jsx"],"sourcesContent":["import React, { useState, useContext, useEffect } from 'react';\nimport './Profile.css';\nimport { CurrentUserContext } from '../../contexts/CurrentUserContext';\nimport { useFormWithValidation } from '../../hooks/useFormValidator';\n\nexport const Profile = ({ onSignOut, onEditUserInfo, onError, onSuccess, isLoading }) => {\n\n\tconst [isVisible, setIsVisible] = useState(false)\n\tconst [isDisable, setIsDisable] = useState(false);\n\tconst currentUser = useContext(CurrentUserContext);\n\n\tconst { values, setValues, handleChange, errors, isValid, resetForm } = useFormWithValidation();\n\n\tuseEffect(() => {\n\t\tsetValues(currentUser)\n\t}, [setValues, currentUser])\n\n\tuseEffect(() => {\n\t\tif (currentUser.name !== values.name || currentUser.email !== values.email) {\n\t\t\tsetIsDisable(true)\n\t\t} else {\n\t\t\tsetIsDisable(false);\n\t\t}\n\t}, [currentUser.name, currentUser.email, values.name, values.email])\n\n\tfunction handleSubmit(e) {\n\t\te.preventDefault();\n\n\t\tonEditUserInfo({\n\t\t\tname: values.name,\n\t\t\temail: values.email\n\t\t})\n\n\t\tresetForm();\n\t}\n\n\tfunction changeVisibility() {\n\t\tsetIsVisible(true);\n\t}\n\n\treturn (\n\n\t\t<section className=\"profile\">\n\t\t\t<div className='profile__container'>\n\t\t\t\t<h1 className='profile__title'>Привет, {currentUser.name}!</h1>\n\t\t\t\t<form className='profile__form' name='form-profile' onSubmit={handleSubmit} noValidate>\n\t\t\t\t\t<div className='profile__wrapper'>\n\t\t\t\t\t\t<p className='profile__caption'>Имя</p>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tclassName='profile__input'\n\t\t\t\t\t\t\tname='name'\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tplaceholder='Имя'\n\t\t\t\t\t\t\tvalue={values.name || ''}\n\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\tminLength='2'\n\t\t\t\t\t\t\tmaxLength='30'\n\t\t\t\t\t\t\tautoComplete='off'\n\t\t\t\t\t\t\tdisabled={(isVisible ? false : true) || isLoading} />\n\t\t\t\t\t</div>\n\t\t\t\t\t<span className={errors.name ? 'profile__error profile__error_margin' : 'profile__error'}>{errors.name}</span>\n\t\t\t\t\t<div className='profile__wrapper'>\n\t\t\t\t\t\t<p className='profile__caption'>E-mail</p>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tclassName='profile__input'\n\t\t\t\t\t\t\tname='email'\n\t\t\t\t\t\t\ttype=\"email\"\n\t\t\t\t\t\t\tplaceholder='E-mail'\n\t\t\t\t\t\t\tvalue={values.email || ''}\n\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\tpattern='^[a-zA-Z0-9_.+\\-]+@[a-zA-Z0-9\\-]+\\.[a-zA-Z0-9\\-.]+$'\n\t\t\t\t\t\t\tautoComplete='off'\n\t\t\t\t\t\t\tdisabled={(isVisible ? false : true) || isLoading} />\n\t\t\t\t\t</div>\n\t\t\t\t\t<span className={errors.email ? 'profile__error' : 'profile__error'}>{errors.email}</span>\n\t\t\t\t\t<div className='profile__container-button'>\n\t\t\t\t\t\t{isVisible ? (<>\n\t\t\t\t\t\t\t<span className='profile__error profile__error_type_server' >{onError || onSuccess}</span>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName={!isValid || !isDisable ? 'button profile__button profile__button_type_save profile__button_disable' : 'button profile__button profile__button_type_save '}\n\t\t\t\t\t\t\t\ttype='submit'\n\t\t\t\t\t\t\t\taria-label='Сохранить'\n\t\t\t\t\t\t\t\tdisabled={isValid && isDisable ? false : true}>\n\t\t\t\t\t\t\t\tСохранить\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</>) : (<>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName='button profile__button profile__button_type_edit'\n\t\t\t\t\t\t\t\ttype='button'\n\t\t\t\t\t\t\t\taria-label='Редактировать'\n\t\t\t\t\t\t\t\tonClick={changeVisibility}>\n\t\t\t\t\t\t\t\tРедактировать\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName='button profile__button profile__button_type_exit'\n\t\t\t\t\t\t\t\ttype='button'\n\t\t\t\t\t\t\t\taria-label='Выход'\n\t\t\t\t\t\t\t\tonClick={onSignOut}>\n\t\t\t\t\t\t\t\tВыйти из аккаунта\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</>)}\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t</section>\n\n\t)\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}