{"ast":null,"code":"import _classCallCheck from\"/Users/denis/dev/movies-explorer-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/denis/dev/movies-explorer-frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";var apiOptions={url:'/api.movies-player.nomoredomainsrocks.ru'};var Api=/*#__PURE__*/function(){function Api(config){_classCallCheck(this,Api);this._url=config.url;this._headers=config.headers;}_createClass(Api,[{key:\"_handleResponse\",value:function _handleResponse(res){if(res.ok){return res.json();}else{return res.json().then(function(err){var error=new Error(err.message);error.status=res.status;throw error;});}}},{key:\"_request\",value:function _request(url,options){return fetch(url,options).then(this._handleResponse);}},{key:\"getUserData\",value:function getUserData(){return this._request(\"\".concat(this._url,\"/users/me\"),{method:'GET',headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('jwt')),'Content-Type':'application/json'}});}},{key:\"sendUserData\",value:function sendUserData(_ref){var name=_ref.name,email=_ref.email;return this._request(\"\".concat(this._url,\"/users/me\"),{method:'PATCH',headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('jwt')),'Content-Type':'application/json'},body:JSON.stringify({name:name,email:email})});}},{key:\"getSavedMovies\",value:function getSavedMovies(){return this._request(\"\".concat(this._url,\"/movies\"),{method:'GET',headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('jwt')),'Content-Type':'application/json'}});}},{key:\"addMovie\",value:function addMovie(movie){return this._request(\"\".concat(this._url,\"/movies\"),{method:'POST',headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('jwt')),'Content-Type':'application/json'},body:JSON.stringify(movie)});}},{key:\"deleteMovie\",value:function deleteMovie(movieId){return this._request(\"\".concat(this._url,\"/movies/\").concat(movieId),{method:'DELETE',headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('jwt')),'Content-Type':'application/json'}});}}]);return Api;}();export var api=new Api(apiOptions);","map":{"version":3,"names":["apiOptions","url","Api","config","_classCallCheck","_url","_headers","headers","_createClass","key","value","_handleResponse","res","ok","json","then","err","error","Error","message","status","_request","options","fetch","getUserData","concat","method","localStorage","getItem","sendUserData","_ref","name","email","body","JSON","stringify","getSavedMovies","addMovie","movie","deleteMovie","movieId","api"],"sources":["/Users/denis/dev/movies-explorer-frontend/src/utils/MainApi.js"],"sourcesContent":["const apiOptions = {\n\turl: '/api.movies-player.nomoredomainsrocks.ru',\n}\n\nclass Api {\n\tconstructor(config) {\n\t\tthis._url = config.url;\n\t\tthis._headers = config.headers;\n\t}\n\n\t_handleResponse(res) {\n\t\tif (res.ok) {\n\t\t\treturn res.json();\n\t\t} else {\n\t\t\treturn (res.json())\n\t\t\t\t.then((err) => {\n\t\t\t\t\tconst error = new Error(err.message);\n\t\t\t\t\terror.status = res.status;\n\t\t\t\t\tthrow error;\n\t\t\t\t})\n\t\t}\n\t}\n\n\t_request(url, options) {\n\t\treturn fetch(url, options).then(this._handleResponse)\n\t}\n\n\tgetUserData() {\n\t\treturn this._request(`${this._url}/users/me`, {\n\t\t\tmethod: 'GET',\n\t\t\theaders: {\n\t\t\t\t'Authorization': `Bearer ${localStorage.getItem('jwt')}`,\n\t\t\t\t'Content-Type': 'application/json'\n\t\t\t}\n\t\t})\n\t}\n\n\tsendUserData({ name, email }) {\n\t\treturn this._request(`${this._url}/users/me`, {\n\t\t\tmethod: 'PATCH',\n\t\t\theaders: {\n\t\t\t\t'Authorization': `Bearer ${localStorage.getItem('jwt')}`,\n\t\t\t\t'Content-Type': 'application/json'\n\t\t\t},\n\t\t\tbody: JSON.stringify({\n\t\t\t\tname: name,\n\t\t\t\temail: email\n\t\t\t})\n\t\t})\n\t}\n\n\tgetSavedMovies() {\n\t\treturn this._request(`${this._url}/movies`, {\n\t\t\tmethod: 'GET',\n\t\t\theaders: {\n\t\t\t\t'Authorization': `Bearer ${localStorage.getItem('jwt')}`,\n\t\t\t\t'Content-Type': 'application/json'\n\t\t\t}\n\t\t})\n\t}\n\n\taddMovie(movie) {\n\t\treturn this._request(`${this._url}/movies`, {\n\t\t\tmethod: 'POST',\n\t\t\theaders: {\n\t\t\t\t'Authorization': `Bearer ${localStorage.getItem('jwt')}`,\n\t\t\t\t'Content-Type': 'application/json'\n\t\t\t},\n\t\t\tbody: JSON.stringify(movie)\n\t\t})\n\t}\n\n\tdeleteMovie(movieId) {\n\t\treturn this._request(`${this._url}/movies/${movieId}`, {\n\t\t\tmethod: 'DELETE',\n\t\t\theaders: {\n\t\t\t\t'Authorization': `Bearer ${localStorage.getItem('jwt')}`,\n\t\t\t\t'Content-Type': 'application/json'\n\t\t\t},\n\t\t})\n\t}\n}\n\nexport const api = new Api(apiOptions);"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}