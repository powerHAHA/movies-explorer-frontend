{"ast":null,"code":"import _slicedToArray from\"/Users/denis/dev/movies-explorer-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import'./SearchForm.css';import{FilterCheckbox}from'../FilterCheckbox/FilterCheckbox';import{useLocation}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var SearchForm=function SearchForm(_ref){var onSearch=_ref.onSearch,filterCheckbox=_ref.filterCheckbox,onError=_ref.onError;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var _useLocation=useLocation(),pathname=_useLocation.pathname;var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),shortFilms=_useState4[0],setShortFilms=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),movieName=_useState6[0],setMovieName=_useState6[1];var handleMovieChange=function handleMovieChange(e){setMovieName(e.target.value);};var handleSubmit=function handleSubmit(e){e.preventDefault();if(!movieName){setError('Нужно ввести поисковой запрос');return;}setError('');if(pathname==='/movies'){localStorage.setItem('movieName',movieName);}onSearch(movieName,shortFilms);};var handleShortFilmsChange=function handleShortFilmsChange(){setShortFilms(!shortFilms);if(!movieName){return;}filterCheckbox(!shortFilms);if(pathname==='/movies'){localStorage.setItem('shortFilms',!shortFilms);}};useEffect(function(){if(pathname==='/movies'){var filterMovieName=localStorage.getItem('movieName');var filterShortFilms=JSON.parse(localStorage.getItem('shortFilms'));setMovieName(filterMovieName);setShortFilms(filterShortFilms);if(filterMovieName||filterShortFilms===true){onSearch(filterMovieName,filterShortFilms);}}},[]);return/*#__PURE__*/_jsxs(\"form\",{className:\"search-form\",name:\"search-form\",onSubmit:handleSubmit,noValidate:true,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"search-form__container\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"search-form__input\",id:\"search-query\",name:\"movieName\",type:\"text\",placeholder:\"\\u0424\\u0438\\u043B\\u044C\\u043C\",required:true,value:movieName||'',autoComplete:\"off\",onChange:handleMovieChange}),onError?/*#__PURE__*/_jsx(\"span\",{className:\"search-form__error\",children:onError}):/*#__PURE__*/_jsx(\"span\",{className:\"search-form__error\",children:error}),/*#__PURE__*/_jsx(\"button\",{className:\"button search-form__button \",type:\"submit\",\"aria-label\":\"\\u041F\\u043E\\u0438\\u0441\\u043A\"})]}),/*#__PURE__*/_jsx(FilterCheckbox,{value:shortFilms,onChange:handleShortFilmsChange})]});};","map":{"version":3,"names":["React","useState","useEffect","FilterCheckbox","useLocation","jsx","_jsx","jsxs","_jsxs","SearchForm","_ref","onSearch","filterCheckbox","onError","_useState","_useState2","_slicedToArray","error","setError","_useLocation","pathname","_useState3","_useState4","shortFilms","setShortFilms","_useState5","_useState6","movieName","setMovieName","handleMovieChange","e","target","value","handleSubmit","preventDefault","localStorage","setItem","handleShortFilmsChange","filterMovieName","getItem","filterShortFilms","JSON","parse","className","name","onSubmit","noValidate","children","id","type","placeholder","required","autoComplete","onChange"],"sources":["/Users/denis/dev/movies-explorer-frontend/src/components/SearchForm/SearchForm.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './SearchForm.css';\nimport { FilterCheckbox } from '../FilterCheckbox/FilterCheckbox';\nimport { useLocation } from 'react-router-dom';\n\nexport const SearchForm = ({ onSearch, filterCheckbox, onError }) => {\n\tconst [error, setError] = useState('');\n\tconst { pathname } = useLocation();\n\n\tconst [shortFilms, setShortFilms] = useState(false);\n\tconst [movieName, setMovieName] = useState('');\n\tconst handleMovieChange = (e) => {\n\t\tsetMovieName(e.target.value);\n\t};\n\n\tconst handleSubmit = (e) => {\n\t\te.preventDefault();\n\t\tif (!movieName) {\n\t\t\tsetError('Нужно ввести поисковой запрос');\n\t\t\treturn;\n\t\t}\n\t\tsetError('');\n\t\tif (pathname === '/movies') {\n\t\t\tlocalStorage.setItem('movieName', movieName);\n\t\t}\n\t\tonSearch(movieName, shortFilms)\n\n\t};\n\n\tconst handleShortFilmsChange = () => {\n\t\tsetShortFilms(!shortFilms);\n\t\tif (!movieName) {\n\t\t\treturn;\n\t\t}\n\t\tfilterCheckbox(!shortFilms);\n\t\tif (pathname === '/movies') {\n\t\t\tlocalStorage.setItem('shortFilms', !shortFilms);\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tif (pathname === '/movies') {\n\t\t\tconst filterMovieName = localStorage.getItem('movieName');\n\t\t\tconst filterShortFilms = JSON.parse(localStorage.getItem('shortFilms'));\n\t\t\tsetMovieName(filterMovieName);\n\t\t\tsetShortFilms(filterShortFilms);\n\t\t\tif (filterMovieName || filterShortFilms === true) {\n\t\t\t\tonSearch(filterMovieName, filterShortFilms);\n\t\t\t}\n\t\t}\n\t}, []);\n\n\n\treturn (\n\n\t\t<form className=\"search-form\" name='search-form'\n\t\t\tonSubmit={handleSubmit}\n\t\t\tnoValidate>\n\t\t\t<div className='search-form__container'>\n\t\t\t\t<input\n\t\t\t\t\tclassName=\"search-form__input\"\n\t\t\t\t\tid=\"search-query\"\n\t\t\t\t\tname=\"movieName\"\n\t\t\t\t\ttype='text'\n\t\t\t\t\tplaceholder=\"Фильм\"\n\t\t\t\t\trequired\n\t\t\t\t\tvalue={movieName || ''}\n\t\t\t\t\tautoComplete='off'\n\t\t\t\t\tonChange={handleMovieChange}\n\t\t\t\t/>\n\t\t\t\t{onError ? <span className='search-form__error'>{onError}</span> : <span className='search-form__error'>{error}</span>}\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"button search-form__button \"\n\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\taria-label=\"Поиск\" />\n\t\t\t</div>\n\t\t\t<FilterCheckbox\n\t\t\t\tvalue={shortFilms} onChange={handleShortFilmsChange}\n\t\t\t/>\n\t\t</form >\n\n\t);\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}