{"ast":null,"code":"import _toConsumableArray from\"/Users/denis/dev/movies-explorer-frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/denis/dev/movies-explorer-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{useLocation}from'react-router-dom';import'./MoviesCardList.css';import{MoviesCard}from'../MoviesCard/MoviesCard';import{ShowMore}from'../ShowMore/ShowMore';import{MAX_WIDTH_TABLET,MAX_WIDTH_MOBILE,DESKTOP_MAX_MOVIES,TABLET_MAX_MOVIES,MOBILE_MAX_MOVIES,DESKTOP_MORE_STEP,TABLET_MORE_STEP}from'../../utils/constants';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var MoviesCardList=function MoviesCardList(_ref){var movies=_ref.movies,savedMovies=_ref.savedMovies,onLikeMovie=_ref.onLikeMovie,onDeleteMovie=_ref.onDeleteMovie;var _useLocation=useLocation(),pathname=_useLocation.pathname;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),initialMovies=_useState2[0],setInitialMovies=_useState2[1];var _useState3=useState(DESKTOP_MAX_MOVIES),_useState4=_slicedToArray(_useState3,2),count=_useState4[0],setCount=_useState4[1];var _useState5=useState(DESKTOP_MORE_STEP),_useState6=_slicedToArray(_useState5,2),moreCount=_useState6[0],setMoreCount=_useState6[1];useEffect(function(){onResize();window.addEventListener(\"resize\",onResize);return function(){window.removeEventListener(\"resize\",onResize);};},[]);var timeout=null;function onResize(){timeout&&clearTimeout(timeout);timeout=setTimeout(function(){var width=window.innerWidth;if(pathname==='/saved-movies'){setInitialMovies(movies);}if(width>MAX_WIDTH_TABLET){setCount(DESKTOP_MAX_MOVIES);setMoreCount(DESKTOP_MORE_STEP);}else if(width>MAX_WIDTH_MOBILE){setCount(TABLET_MAX_MOVIES);setMoreCount(TABLET_MORE_STEP);}else{setCount(MOBILE_MAX_MOVIES);setMoreCount(TABLET_MORE_STEP);}},100);}React.useEffect(function(){setInitialMovies(movies.slice(0,count));},[movies,count]);function handleMoreClick(){var newArray=_toConsumableArray(movies.slice(0,count+moreCount));setCount(count+moreCount);setInitialMovies(newArray);}return/*#__PURE__*/_jsxs(\"section\",{className:\"card-list\",children:[initialMovies.length>0?/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"ul\",{className:\"card-list__items \".concat(pathname==='/saved-movies'?'card-list__items_size_b':''),children:initialMovies.map(function(movie){return/*#__PURE__*/_jsx(MoviesCard,{movie:movie,savedMovies:savedMovies,onLikeMovie:onLikeMovie,onDeleteMovie:onDeleteMovie},movie.id||movie.movieId);})})}):/*#__PURE__*/_jsx(\"p\",{className:\"card-list__text\",children:\"\\u041D\\u0438\\u0447\\u0435\\u0433\\u043E \\u043D\\u0435 \\u043D\\u0430\\u0439\\u0434\\u0435\\u043D\\u043E\"}),initialMovies.length===movies.length?'':/*#__PURE__*/_jsx(ShowMore,{onClick:handleMoreClick})]});};","map":{"version":3,"names":["React","useState","useEffect","useLocation","MoviesCard","ShowMore","MAX_WIDTH_TABLET","MAX_WIDTH_MOBILE","DESKTOP_MAX_MOVIES","TABLET_MAX_MOVIES","MOBILE_MAX_MOVIES","DESKTOP_MORE_STEP","TABLET_MORE_STEP","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","MoviesCardList","_ref","movies","savedMovies","onLikeMovie","onDeleteMovie","_useLocation","pathname","_useState","_useState2","_slicedToArray","initialMovies","setInitialMovies","_useState3","_useState4","count","setCount","_useState5","_useState6","moreCount","setMoreCount","onResize","window","addEventListener","removeEventListener","timeout","clearTimeout","setTimeout","width","innerWidth","slice","handleMoreClick","newArray","_toConsumableArray","className","children","length","concat","map","movie","id","movieId","onClick"],"sources":["/Users/denis/dev/movies-explorer-frontend/src/components/MoviesCardList/MoviesCardList.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport './MoviesCardList.css';\nimport { MoviesCard } from '../MoviesCard/MoviesCard';\nimport { ShowMore } from '../ShowMore/ShowMore';\nimport {\n\tMAX_WIDTH_TABLET,\n\tMAX_WIDTH_MOBILE,\n\tDESKTOP_MAX_MOVIES,\n\tTABLET_MAX_MOVIES,\n\tMOBILE_MAX_MOVIES,\n\tDESKTOP_MORE_STEP,\n\tTABLET_MORE_STEP\n} from '../../utils/constants';\n\nexport const MoviesCardList = ({ movies, savedMovies, onLikeMovie, onDeleteMovie }) => {\n\tconst { pathname } = useLocation();\n\n\tconst [initialMovies, setInitialMovies] = useState([]);\n\n\tconst [count, setCount] = useState(DESKTOP_MAX_MOVIES);\n\tconst [moreCount, setMoreCount] = useState(DESKTOP_MORE_STEP);\n\n\tuseEffect(() => {\n\t\tonResize()\n\t\twindow.addEventListener(\"resize\", onResize)\n\n\t\treturn () => {\n\t\t\twindow.removeEventListener(\"resize\", onResize)\n\t\t}\n\t}, []);\n\n\tlet timeout = null;\n\n\tfunction onResize() {\n\t\ttimeout && clearTimeout(timeout);\n\n\t\ttimeout = setTimeout(() => {\n\t\t\tconst width = window.innerWidth;\n\t\t\tif (pathname === '/saved-movies') {\n\t\t\t\tsetInitialMovies(movies);\n\t\t\t}\n\t\t\tif (width > MAX_WIDTH_TABLET) {\n\t\t\t\tsetCount(DESKTOP_MAX_MOVIES)\n\t\t\t\tsetMoreCount(DESKTOP_MORE_STEP)\n\t\t\t} else if (width > MAX_WIDTH_MOBILE) {\n\t\t\t\tsetCount(TABLET_MAX_MOVIES)\n\t\t\t\tsetMoreCount(TABLET_MORE_STEP)\n\t\t\t} else {\n\t\t\t\tsetCount(MOBILE_MAX_MOVIES)\n\t\t\t\tsetMoreCount(TABLET_MORE_STEP)\n\t\t\t}\n\t\t}, 100);\n\t}\n\n\tReact.useEffect(() => {\n\t\tsetInitialMovies(movies.slice(0, count))\n\t}, [movies, count]);\n\n\tfunction handleMoreClick() {\n\t\tconst newArray = [\n\t\t\t...movies.slice(0, (count + moreCount))\n\t\t]\n\t\tsetCount(count + moreCount);\n\t\tsetInitialMovies(newArray);\n\t}\n\n\treturn (\n\t\t<section className=\"card-list\">\n\t\t\t{initialMovies.length > 0 ? (\n\t\t\t\t<>\n\t\t\t\t\t<ul className={`card-list__items ${pathname === '/saved-movies' ? 'card-list__items_size_b' : ''}`}>\n\t\t\t\t\t\t{initialMovies.map((movie) => (\n\t\t\t\t\t\t\t<MoviesCard\n\t\t\t\t\t\t\t\tkey={movie.id || movie.movieId}\n\t\t\t\t\t\t\t\tmovie={movie}\n\t\t\t\t\t\t\t\tsavedMovies={savedMovies}\n\t\t\t\t\t\t\t\tonLikeMovie={onLikeMovie}\n\t\t\t\t\t\t\t\tonDeleteMovie={onDeleteMovie}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</ul>\n\t\t\t\t</>\n\t\t\t) :\n\t\t\t\t(\n\t\t\t\t\t<p className='card-list__text'>Ничего не найдено</p>\n\t\t\t\t)}\n\n\t\t\t{initialMovies.length === movies.length ? '' :\n\t\t\t\t<ShowMore\n\t\t\t\t\tonClick={handleMoreClick}>\n\t\t\t\t</ShowMore>\n\t\t\t}\n\t\t</section>\n\t);\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}