{"ast":null,"code":"const apiOptions = {\n  url: '/api.movies-player.nomoredomainsrocks.ru'\n};\nclass Api {\n  constructor(config) {\n    this._url = config.url;\n    this._headers = config.headers;\n  }\n  _handleResponse(res) {\n    if (res.ok) {\n      return res.json();\n    } else {\n      return res.json().then(err => {\n        const error = new Error(err.message);\n        error.status = res.status;\n        throw error;\n      });\n    }\n  }\n  _request(url, options) {\n    return fetch(url, options).then(this._handleResponse);\n  }\n  getUserData() {\n    return this._request(`${this._url}/users/me`, {\n      method: 'GET',\n      headers: {\n        'Authorization': `Bearer ${localStorage.getItem('jwt')}`,\n        'Content-Type': 'application/json'\n      }\n    });\n  }\n  sendUserData(_ref) {\n    let {\n      name,\n      email\n    } = _ref;\n    return this._request(`${this._url}/users/me`, {\n      method: 'PATCH',\n      headers: {\n        'Authorization': `Bearer ${localStorage.getItem('jwt')}`,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        name: name,\n        email: email\n      })\n    });\n  }\n  getSavedMovies() {\n    return this._request(`${this._url}/movies`, {\n      method: 'GET',\n      headers: {\n        'Authorization': `Bearer ${localStorage.getItem('jwt')}`,\n        'Content-Type': 'application/json'\n      }\n    });\n  }\n  addMovie(movie) {\n    return this._request(`${this._url}/movies`, {\n      method: 'POST',\n      headers: {\n        'Authorization': `Bearer ${localStorage.getItem('jwt')}`,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(movie)\n    });\n  }\n  deleteMovie(movieId) {\n    return this._request(`${this._url}/movies/${movieId}`, {\n      method: 'DELETE',\n      headers: {\n        'Authorization': `Bearer ${localStorage.getItem('jwt')}`,\n        'Content-Type': 'application/json'\n      }\n    });\n  }\n}\nexport const api = new Api(apiOptions);","map":{"version":3,"names":["apiOptions","url","Api","constructor","config","_url","_headers","headers","_handleResponse","res","ok","json","then","err","error","Error","message","status","_request","options","fetch","getUserData","method","localStorage","getItem","sendUserData","_ref","name","email","body","JSON","stringify","getSavedMovies","addMovie","movie","deleteMovie","movieId","api"],"sources":["/Users/denis/dev/movies-explorer-frontend/src/utils/MainApi.js"],"sourcesContent":["const apiOptions = {\n\turl: '/api.movies-player.nomoredomainsrocks.ru',\n}\n\nclass Api {\n\tconstructor(config) {\n\t\tthis._url = config.url;\n\t\tthis._headers = config.headers;\n\t}\n\n\t_handleResponse(res) {\n\t\tif (res.ok) {\n\t\t\treturn res.json();\n\t\t} else {\n\t\t\treturn (res.json())\n\t\t\t\t.then((err) => {\n\t\t\t\t\tconst error = new Error(err.message);\n\t\t\t\t\terror.status = res.status;\n\t\t\t\t\tthrow error;\n\t\t\t\t})\n\t\t}\n\t}\n\n\t_request(url, options) {\n\t\treturn fetch(url, options).then(this._handleResponse)\n\t}\n\n\tgetUserData() {\n\t\treturn this._request(`${this._url}/users/me`, {\n\t\t\tmethod: 'GET',\n\t\t\theaders: {\n\t\t\t\t'Authorization': `Bearer ${localStorage.getItem('jwt')}`,\n\t\t\t\t'Content-Type': 'application/json'\n\t\t\t}\n\t\t})\n\t}\n\n\tsendUserData({ name, email }) {\n\t\treturn this._request(`${this._url}/users/me`, {\n\t\t\tmethod: 'PATCH',\n\t\t\theaders: {\n\t\t\t\t'Authorization': `Bearer ${localStorage.getItem('jwt')}`,\n\t\t\t\t'Content-Type': 'application/json'\n\t\t\t},\n\t\t\tbody: JSON.stringify({\n\t\t\t\tname: name,\n\t\t\t\temail: email\n\t\t\t})\n\t\t})\n\t}\n\n\tgetSavedMovies() {\n\t\treturn this._request(`${this._url}/movies`, {\n\t\t\tmethod: 'GET',\n\t\t\theaders: {\n\t\t\t\t'Authorization': `Bearer ${localStorage.getItem('jwt')}`,\n\t\t\t\t'Content-Type': 'application/json'\n\t\t\t}\n\t\t})\n\t}\n\n\taddMovie(movie) {\n\t\treturn this._request(`${this._url}/movies`, {\n\t\t\tmethod: 'POST',\n\t\t\theaders: {\n\t\t\t\t'Authorization': `Bearer ${localStorage.getItem('jwt')}`,\n\t\t\t\t'Content-Type': 'application/json'\n\t\t\t},\n\t\t\tbody: JSON.stringify(movie)\n\t\t})\n\t}\n\n\tdeleteMovie(movieId) {\n\t\treturn this._request(`${this._url}/movies/${movieId}`, {\n\t\t\tmethod: 'DELETE',\n\t\t\theaders: {\n\t\t\t\t'Authorization': `Bearer ${localStorage.getItem('jwt')}`,\n\t\t\t\t'Content-Type': 'application/json'\n\t\t\t},\n\t\t})\n\t}\n}\n\nexport const api = new Api(apiOptions);"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}