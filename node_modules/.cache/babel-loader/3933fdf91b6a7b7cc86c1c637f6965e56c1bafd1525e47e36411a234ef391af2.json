{"ast":null,"code":"const authOptions = {\n  url: '/api.movies-player.nomoredomainsrocks.ru',\n  headers: {\n    'Content-Type': 'application/json'\n  }\n};\nclass Auth {\n  constructor(config) {\n    this._url = config.url;\n    this._headers = config.headers;\n  }\n  _handleResponse(res) {\n    if (res.ok) {\n      return res.json();\n    } else {\n      return res.json().then(err => {\n        const error = new Error(err.message);\n        error.status = res.status;\n        throw error;\n      });\n    }\n  }\n  register(_ref) {\n    let {\n      name,\n      email,\n      password\n    } = _ref;\n    return fetch(`${this._url}/signup`, {\n      method: 'POST',\n      headers: this._headers,\n      body: JSON.stringify({\n        name: name,\n        password: password,\n        email: email\n      })\n    }).then(this._handleResponse);\n  }\n  authorize(_ref2) {\n    let {\n      email,\n      password\n    } = _ref2;\n    return fetch(`${this._url}/signin`, {\n      method: 'POST',\n      headers: this._headers,\n      body: JSON.stringify({\n        email: email,\n        password: password\n      })\n    }).then(this._handleResponse);\n  }\n  checkToken(token) {\n    return fetch(`${this._url}/users/me`, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${token}`\n      }\n    }).then(this._handleResponse);\n  }\n}\nexport const auth = new Auth(authOptions);","map":{"version":3,"names":["authOptions","url","headers","Auth","constructor","config","_url","_headers","_handleResponse","res","ok","json","then","err","error","Error","message","status","register","_ref","name","email","password","fetch","method","body","JSON","stringify","authorize","_ref2","checkToken","token","auth"],"sources":["/Users/denis/dev/movies-explorer-frontend/src/utils/AuthApi.js"],"sourcesContent":["const authOptions = {\n\turl: '/api.movies-player.nomoredomainsrocks.ru',\n\theaders: {\n\t\t'Content-Type': 'application/json'\n\t}\n}\n\nclass Auth {\n\tconstructor(config) {\n\t\tthis._url = config.url;\n\t\tthis._headers = config.headers;\n\t}\n\n\t_handleResponse(res) {\n\t\tif (res.ok) {\n\t\t\treturn res.json();\n\t\t} else {\n\t\t\treturn (res.json())\n\t\t\t\t.then((err) => {\n\t\t\t\t\tconst error = new Error(err.message);\n\t\t\t\t\terror.status = res.status;\n\t\t\t\t\tthrow error;\n\t\t\t\t})\n\t\t}\n\t}\n\n\n\tregister({ name, email, password }) {\n\t\treturn fetch(`${this._url}/signup`, {\n\t\t\tmethod: 'POST',\n\t\t\theaders: this._headers,\n\t\t\tbody: JSON.stringify({\n\t\t\t\tname: name,\n\t\t\t\tpassword: password,\n\t\t\t\temail: email\n\t\t\t})\n\t\t}).then(this._handleResponse)\n\t}\n\n\tauthorize({ email, password }) {\n\t\treturn fetch(`${this._url}/signin`, {\n\t\t\tmethod: 'POST',\n\t\t\theaders: this._headers,\n\t\t\tbody: JSON.stringify({\n\t\t\t\temail: email,\n\t\t\t\tpassword: password\n\t\t\t})\n\t\t}).then(this._handleResponse);\n\t}\n\n\tcheckToken(token) {\n\t\treturn fetch(`${this._url}/users/me`, {\n\t\t\tmethod: 'GET',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t'Authorization': `Bearer ${token}`\n\t\t\t}\n\t\t}).then(this._handleResponse)\n\t}\n}\n\nexport const auth = new Auth(authOptions);"],"mappings":"AAAA,MAAMA,WAAW,GAAG;EACnBC,GAAG,EAAE,0CAA0C;EAC/CC,OAAO,EAAE;IACR,cAAc,EAAE;EACjB;AACD,CAAC;AAED,MAAMC,IAAI,CAAC;EACVC,WAAWA,CAACC,MAAM,EAAE;IACnB,IAAI,CAACC,IAAI,GAAGD,MAAM,CAACJ,GAAG;IACtB,IAAI,CAACM,QAAQ,GAAGF,MAAM,CAACH,OAAO;EAC/B;EAEAM,eAAeA,CAACC,GAAG,EAAE;IACpB,IAAIA,GAAG,CAACC,EAAE,EAAE;MACX,OAAOD,GAAG,CAACE,IAAI,CAAC,CAAC;IAClB,CAAC,MAAM;MACN,OAAQF,GAAG,CAACE,IAAI,CAAC,CAAC,CAChBC,IAAI,CAAEC,GAAG,IAAK;QACd,MAAMC,KAAK,GAAG,IAAIC,KAAK,CAACF,GAAG,CAACG,OAAO,CAAC;QACpCF,KAAK,CAACG,MAAM,GAAGR,GAAG,CAACQ,MAAM;QACzB,MAAMH,KAAK;MACZ,CAAC,CAAC;IACJ;EACD;EAGAI,QAAQA,CAAAC,IAAA,EAA4B;IAAA,IAA3B;MAAEC,IAAI;MAAEC,KAAK;MAAEC;IAAS,CAAC,GAAAH,IAAA;IACjC,OAAOI,KAAK,CAAE,GAAE,IAAI,CAACjB,IAAK,SAAQ,EAAE;MACnCkB,MAAM,EAAE,MAAM;MACdtB,OAAO,EAAE,IAAI,CAACK,QAAQ;MACtBkB,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;QACpBP,IAAI,EAAEA,IAAI;QACVE,QAAQ,EAAEA,QAAQ;QAClBD,KAAK,EAAEA;MACR,CAAC;IACF,CAAC,CAAC,CAACT,IAAI,CAAC,IAAI,CAACJ,eAAe,CAAC;EAC9B;EAEAoB,SAASA,CAAAC,KAAA,EAAsB;IAAA,IAArB;MAAER,KAAK;MAAEC;IAAS,CAAC,GAAAO,KAAA;IAC5B,OAAON,KAAK,CAAE,GAAE,IAAI,CAACjB,IAAK,SAAQ,EAAE;MACnCkB,MAAM,EAAE,MAAM;MACdtB,OAAO,EAAE,IAAI,CAACK,QAAQ;MACtBkB,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;QACpBN,KAAK,EAAEA,KAAK;QACZC,QAAQ,EAAEA;MACX,CAAC;IACF,CAAC,CAAC,CAACV,IAAI,CAAC,IAAI,CAACJ,eAAe,CAAC;EAC9B;EAEAsB,UAAUA,CAACC,KAAK,EAAE;IACjB,OAAOR,KAAK,CAAE,GAAE,IAAI,CAACjB,IAAK,WAAU,EAAE;MACrCkB,MAAM,EAAE,KAAK;MACbtB,OAAO,EAAE;QACR,cAAc,EAAE,kBAAkB;QAClC,eAAe,EAAG,UAAS6B,KAAM;MAClC;IACD,CAAC,CAAC,CAACnB,IAAI,CAAC,IAAI,CAACJ,eAAe,CAAC;EAC9B;AACD;AAEA,OAAO,MAAMwB,IAAI,GAAG,IAAI7B,IAAI,CAACH,WAAW,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}