{"ast":null,"code":"import _classCallCheck from\"/Users/denis/dev/movies-explorer-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/denis/dev/movies-explorer-frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";var authOptions={url:'/api.movies-player.nomoredomainsrocks.ru',headers:{'Content-Type':'application/json'}};var Auth=/*#__PURE__*/function(){function Auth(config){_classCallCheck(this,Auth);this._url=config.url;this._headers=config.headers;}_createClass(Auth,[{key:\"_handleResponse\",value:function _handleResponse(res){if(res.ok){return res.json();}else{return res.json().then(function(err){var error=new Error(err.message);error.status=res.status;throw error;});}}},{key:\"register\",value:function register(_ref){var name=_ref.name,email=_ref.email,password=_ref.password;return fetch(\"\".concat(this._url,\"/signup\"),{method:'POST',headers:this._headers,body:JSON.stringify({name:name,password:password,email:email})}).then(this._handleResponse);}},{key:\"authorize\",value:function authorize(_ref2){var email=_ref2.email,password=_ref2.password;return fetch(\"\".concat(this._url,\"/signin\"),{method:'POST',headers:this._headers,body:JSON.stringify({email:email,password:password})}).then(this._handleResponse);}},{key:\"checkToken\",value:function checkToken(token){return fetch(\"\".concat(this._url,\"/users/me\"),{method:'GET',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)}}).then(this._handleResponse);}}]);return Auth;}();export var auth=new Auth(authOptions);","map":{"version":3,"names":["authOptions","url","headers","Auth","config","_classCallCheck","_url","_headers","_createClass","key","value","_handleResponse","res","ok","json","then","err","error","Error","message","status","register","_ref","name","email","password","fetch","concat","method","body","JSON","stringify","authorize","_ref2","checkToken","token","auth"],"sources":["/Users/denis/dev/movies-explorer-frontend/src/utils/AuthApi.js"],"sourcesContent":["const authOptions = {\n\turl: '/api.movies-player.nomoredomainsrocks.ru',\n\theaders: {\n\t\t'Content-Type': 'application/json'\n\t}\n}\n\nclass Auth {\n\tconstructor(config) {\n\t\tthis._url = config.url;\n\t\tthis._headers = config.headers;\n\t}\n\n\t_handleResponse(res) {\n\t\tif (res.ok) {\n\t\t\treturn res.json();\n\t\t} else {\n\t\t\treturn (res.json())\n\t\t\t\t.then((err) => {\n\t\t\t\t\tconst error = new Error(err.message);\n\t\t\t\t\terror.status = res.status;\n\t\t\t\t\tthrow error;\n\t\t\t\t})\n\t\t}\n\t}\n\n\n\tregister({ name, email, password }) {\n\t\treturn fetch(`${this._url}/signup`, {\n\t\t\tmethod: 'POST',\n\t\t\theaders: this._headers,\n\t\t\tbody: JSON.stringify({\n\t\t\t\tname: name,\n\t\t\t\tpassword: password,\n\t\t\t\temail: email\n\t\t\t})\n\t\t}).then(this._handleResponse)\n\t}\n\n\tauthorize({ email, password }) {\n\t\treturn fetch(`${this._url}/signin`, {\n\t\t\tmethod: 'POST',\n\t\t\theaders: this._headers,\n\t\t\tbody: JSON.stringify({\n\t\t\t\temail: email,\n\t\t\t\tpassword: password\n\t\t\t})\n\t\t}).then(this._handleResponse);\n\t}\n\n\tcheckToken(token) {\n\t\treturn fetch(`${this._url}/users/me`, {\n\t\t\tmethod: 'GET',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t'Authorization': `Bearer ${token}`\n\t\t\t}\n\t\t}).then(this._handleResponse)\n\t}\n}\n\nexport const auth = new Auth(authOptions);"],"mappings":"4PAAA,GAAM,CAAAA,WAAW,CAAG,CACnBC,GAAG,CAAE,0CAA0C,CAC/CC,OAAO,CAAE,CACR,cAAc,CAAE,kBACjB,CACD,CAAC,IAEK,CAAAC,IAAI,yBACT,SAAAA,KAAYC,MAAM,CAAE,CAAAC,eAAA,MAAAF,IAAA,EACnB,IAAI,CAACG,IAAI,CAAGF,MAAM,CAACH,GAAG,CACtB,IAAI,CAACM,QAAQ,CAAGH,MAAM,CAACF,OAAO,CAC/B,CAACM,YAAA,CAAAL,IAAA,GAAAM,GAAA,mBAAAC,KAAA,CAED,SAAAC,gBAAgBC,GAAG,CAAE,CACpB,GAAIA,GAAG,CAACC,EAAE,CAAE,CACX,MAAO,CAAAD,GAAG,CAACE,IAAI,CAAC,CAAC,CAClB,CAAC,IAAM,CACN,MAAQ,CAAAF,GAAG,CAACE,IAAI,CAAC,CAAC,CAChBC,IAAI,CAAC,SAACC,GAAG,CAAK,CACd,GAAM,CAAAC,KAAK,CAAG,GAAI,CAAAC,KAAK,CAACF,GAAG,CAACG,OAAO,CAAC,CACpCF,KAAK,CAACG,MAAM,CAAGR,GAAG,CAACQ,MAAM,CACzB,KAAM,CAAAH,KAAK,CACZ,CAAC,CAAC,CACJ,CACD,CAAC,GAAAR,GAAA,YAAAC,KAAA,CAGD,SAAAW,SAAAC,IAAA,CAAoC,IAAzB,CAAAC,IAAI,CAAAD,IAAA,CAAJC,IAAI,CAAEC,KAAK,CAAAF,IAAA,CAALE,KAAK,CAAEC,QAAQ,CAAAH,IAAA,CAARG,QAAQ,CAC/B,MAAO,CAAAC,KAAK,IAAAC,MAAA,CAAI,IAAI,CAACrB,IAAI,YAAW,CACnCsB,MAAM,CAAE,MAAM,CACd1B,OAAO,CAAE,IAAI,CAACK,QAAQ,CACtBsB,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CACpBR,IAAI,CAAEA,IAAI,CACVE,QAAQ,CAAEA,QAAQ,CAClBD,KAAK,CAAEA,KACR,CAAC,CACF,CAAC,CAAC,CAACT,IAAI,CAAC,IAAI,CAACJ,eAAe,CAAC,CAC9B,CAAC,GAAAF,GAAA,aAAAC,KAAA,CAED,SAAAsB,UAAAC,KAAA,CAA+B,IAAnB,CAAAT,KAAK,CAAAS,KAAA,CAALT,KAAK,CAAEC,QAAQ,CAAAQ,KAAA,CAARR,QAAQ,CAC1B,MAAO,CAAAC,KAAK,IAAAC,MAAA,CAAI,IAAI,CAACrB,IAAI,YAAW,CACnCsB,MAAM,CAAE,MAAM,CACd1B,OAAO,CAAE,IAAI,CAACK,QAAQ,CACtBsB,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CACpBP,KAAK,CAAEA,KAAK,CACZC,QAAQ,CAAEA,QACX,CAAC,CACF,CAAC,CAAC,CAACV,IAAI,CAAC,IAAI,CAACJ,eAAe,CAAC,CAC9B,CAAC,GAAAF,GAAA,cAAAC,KAAA,CAED,SAAAwB,WAAWC,KAAK,CAAE,CACjB,MAAO,CAAAT,KAAK,IAAAC,MAAA,CAAI,IAAI,CAACrB,IAAI,cAAa,CACrCsB,MAAM,CAAE,KAAK,CACb1B,OAAO,CAAE,CACR,cAAc,CAAE,kBAAkB,CAClC,eAAe,WAAAyB,MAAA,CAAYQ,KAAK,CACjC,CACD,CAAC,CAAC,CAACpB,IAAI,CAAC,IAAI,CAACJ,eAAe,CAAC,CAC9B,CAAC,WAAAR,IAAA,KAGF,MAAO,IAAM,CAAAiC,IAAI,CAAG,GAAI,CAAAjC,IAAI,CAACH,WAAW,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}